"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _createSuper(t){return function(){var e,n=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var s=_getPrototypeOf(this).constructor;e=Reflect.construct(n,arguments,s)}else e=n.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Shape=function t(e,n,s,i,o){_classCallCheck(this,t),this.x=e,this.y=n,this.velX=s,this.velY=i,this.exists=o},Ball=function(t){_inherits(n,Shape);var e=_createSuper(n);function n(t,s,i,o,l,r,a){var c;return _classCallCheck(this,n),(c=e.call(this,t,s,i,o,a)).color=l,c.size=r,c}return _createClass(n,[{key:"draw",value:function(){ctx.beginPath(),ctx.fillStyle=this.color,ctx.arc(this.x,this.y,this.size,0,2*Math.PI),ctx.fill()}},{key:"update",value:function(){this.x+this.size>=width?(this.velX=-this.velX,this.x=width-1.2*this.size):this.x-this.size<=0&&(this.velX=-this.velX,this.x=1.2*this.size),this.y+this.size>=height?(this.velY=-this.velY,this.y=height-1.2*this.size):this.y-this.size<=0&&(this.velY=-this.velY,this.y=1.2*this.size),this.x+=this.velX,this.y+=this.velY}},{key:"collisionDetect",value:function(){for(var t=0;t<balls.length;t++)if(this!==balls[t]&&balls[t].exists){var e=this.x-balls[t].x,n=this.y-balls[t].y;if(Math.sqrt(e*e+n*n)<this.size+balls[t].size)return this.velX=-this.velX,this.velY=-this.velY,balls[t].velX=-balls[t].velX,balls[t].velY=-balls[t].velY,!0}}}]),n}();Ball.countBalls=function(){return balls.reduce((function(t,e){return e.exists?t+1:t+0}),0)},Ball.mouseCollision=function(){for(var t=!0,e=0;e<balls.length;e++){var n=balls[e].x-mouseX,s=balls[e].y-mouseY;Math.sqrt(n*n+s*s)<balls[e].size&&(mouseX=void 0,mouseY=void 0,balls[e].exists=!1,t=!1)}t&&++Ball.miss};var width,height,mouseX,mouseY,canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d"),game=!0;function random(t,e){return Math.floor(Math.random()*(e-t)+t)}function init(){width=canvas.width=window.innerWidth,height=canvas.height=window.innerHeight}init(),window.addEventListener("resize",init),canvas.addEventListener("mousedown",(function(t){mouseX=t.clientX,mouseY=t.clientY,Ball.mouseCollision(),showInfo()}));var balls=[];function fullBalls(){Ball.count=20;for(;balls.length<Ball.count;){var t=new Ball(random(0,width),random(0,height),random(-7,7),random(-7,7),"rgb("+random(0,255)+","+random(0,255)+","+random(0,255)+")",random(20,30),!0);t.collisionDetect()||balls.push(t)}}function loop(){ctx.fillStyle="rgba(0,0,0,0.25)",ctx.fillRect(0,0,width,height);for(var t=0;t<balls.length;t++)balls[t].exists&&(balls[t].draw(),balls[t].update(),balls[t].collisionDetect());0===Ball.countBalls()?(cancelAnimationFrame(loop),showEnd()):requestAnimationFrame(loop)}function showInfo(){var t=document.getElementById("count"),e=document.getElementById("miss");t.textContent=Ball.countBalls(),e.textContent=Ball.miss}function showEnd(){var t=document.getElementById("end"),e=document.getElementById("countMiss");t.classList.remove("no-display"),canvas.classList.add("no-display"),e.textContent=Ball.miss}var btnStart=document.getElementById("btnStart"),btnRestart=document.getElementById("btnRestart");function startGame(){Ball.count=1,Ball.miss=0,balls=[],canvas.classList.remove("no-display"),fullBalls(),loop(),showInfo()}btnStart.addEventListener("mousedown",(function(t){document.getElementById("start").classList.add("no-display"),startGame()})),btnRestart.addEventListener("mousedown",(function(t){document.getElementById("end").classList.add("no-display"),startGame()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5taW4uanMiLCJTaGFwZS5qcyIsIkJhbGwuanMiLCJHYW1lLmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJfY3JlYXRlQ2xhc3MiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJyZXN1bHQiLCJTdXBlciIsIl9nZXRQcm90b3R5cGVPZiIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJOZXdUYXJnZXQiLCJ0aGlzIiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImFyZ3VtZW50cyIsImFwcGx5IiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJzZWxmIiwiY2FsbCIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJSZWZlcmVuY2VFcnJvciIsInNoYW0iLCJQcm94eSIsIkRhdGUiLCJ0b1N0cmluZyIsImUiLCJvIiwic2V0UHJvdG90eXBlT2YiLCJnZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsIlR5cGVFcnJvciIsImNyZWF0ZSIsInZhbHVlIiwiX3NldFByb3RvdHlwZU9mIiwicCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiU2hhcGUiLCJ4IiwieSIsInZlbFgiLCJ2ZWxZIiwiZXhpc3RzIiwiQmFsbCIsIl9TaGFwZSIsIl9zdXBlciIsImNvbG9yIiwic2l6ZSIsIl90aGlzIiwiY3R4IiwiYmVnaW5QYXRoIiwiZmlsbFN0eWxlIiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbCIsIndpZHRoIiwiaGVpZ2h0IiwiaiIsImJhbGxzIiwiZHgiLCJkeSIsInNxcnQiLCJjb3VudEJhbGxzIiwicmVkdWNlIiwiYWNjIiwiYmFsbCIsIm1vdXNlQ29sbGlzaW9uIiwibWlzcyIsImRpc3RYIiwibW91c2VYIiwiZGlzdFkiLCJtb3VzZVkiLCJ1bmRlZmluZWQiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRDb250ZXh0IiwiZ2FtZSIsInJhbmRvbSIsIm1pbiIsIm1heCIsImZsb29yIiwiaW5pdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGllbnRYIiwiY2xpZW50WSIsInNob3dJbmZvIiwiZnVsbEJhbGxzIiwiY291bnQiLCJjb2xsaXNpb25EZXRlY3QiLCJwdXNoIiwibG9vcCIsImZpbGxSZWN0IiwiZHJhdyIsInVwZGF0ZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwic2hvd0VuZCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImluZm9Db3VudCIsImdldEVsZW1lbnRCeUlkIiwiaW5mb01pc3MiLCJ0ZXh0Q29udGVudCIsImVuZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsImJ0blN0YXJ0IiwiYnRuUmVzdGFydCIsInN0YXJ0R2FtZSJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFTQSxRQUFRQyxHQUFtVixPQUF0T0QsUUFBckQsbUJBQVhFLFFBQW9ELGlCQUFwQkEsT0FBT0MsU0FBbUMsU0FBaUJGLEdBQU8sY0FBY0EsR0FBMkIsU0FBaUJBLEdBQU8sT0FBT0EsR0FBeUIsbUJBQVhDLFFBQXlCRCxFQUFJRyxjQUFnQkYsUUFBVUQsSUFBUUMsT0FBT0csVUFBWSxnQkFBa0JKLElBQXlCQSxHQUVuWCxTQUFTSyxrQkFBa0JDLEVBQVFDLEdBQVMsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxJQUFJRSxF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LEVBQ0FqRCxLQUFBeUIsS0FBQSxFQUNBVCxNQUFBLEdBQ0FlLE9BQUFpQyxVQUFBQyxPQUFBLGNBQ0FqQixZQUNBSSxPQUNBTCxXQUdBb0IsU0FBQXZCLGlCQUFBLGFBQUEsU0FBQWpFLEdBQ0FxRCxTQUFBNEIsZUFBQSxTQUNBSSxVQUFBRSxJQUFBLGNBQ0FHLGVBR0FELFdBQUF4QixpQkFBQSxhQUFBLFNBQUFqRSxHQUNBcUQsU0FBQTRCLGVBQUEsT0FDQUksVUFBQUUsSUFBQSxjQUNBRyIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsLCJjbGFzcyBTaGFwZSB7XG4gICAgY29uc3RydWN0b3IoeCwgeSwgdmVsWCwgdmVsWSwgZXhpc3RzKSB7XG4gICAgICAgIHRoaXMueCA9IHhcbiAgICAgICAgdGhpcy55ID0geVxuICAgICAgICB0aGlzLnZlbFggPSB2ZWxYXG4gICAgICAgIHRoaXMudmVsWSA9IHZlbFlcbiAgICAgICAgdGhpcy5leGlzdHMgPSBleGlzdHNcbiAgICB9XG4gICAgXG59IiwiY2xhc3MgQmFsbCBleHRlbmRzIFNoYXBlIHtcbiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB2ZWxYLCB2ZWxZLCBjb2xvciwgc2l6ZSwgZXhpc3RzKSB7XG4gICAgICAgIHN1cGVyKHgsIHksIHZlbFgsIHZlbFksIGV4aXN0cylcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yXG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemVcbiAgICB9XG4gICAgZHJhdygpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yXG4gICAgICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIHRoaXMuc2l6ZSwgMCwgMiAqIE1hdGguUEkpXG4gICAgICAgIGN0eC5maWxsKClcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuXG4gICAgICAgIGlmICggKHRoaXMueCArIHRoaXMuc2l6ZSkgPj0gd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMudmVsWCA9IC0odGhpcy52ZWxYKVxuICAgICAgICAgICAgdGhpcy54ID0gd2lkdGggLSB0aGlzLnNpemUqMS4yXG4gICAgICAgIH1cblxuICAgICAgICBlbHNlIGlmICgodGhpcy54IC0gdGhpcy5zaXplKSA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnZlbFggPSAtKHRoaXMudmVsWClcbiAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuc2l6ZSoxLjJcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgodGhpcy55ICsgdGhpcy5zaXplKSA+PSBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMudmVsWSA9IC0odGhpcy52ZWxZKVxuICAgICAgICAgICAgdGhpcy55ID0gaGVpZ2h0IC0gdGhpcy5zaXplKjEuMlxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCh0aGlzLnkgLSB0aGlzLnNpemUpIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMudmVsWSA9IC0odGhpcy52ZWxZKVxuICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5zaXplKjEuMlxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy54ICs9IHRoaXMudmVsWFxuICAgICAgICB0aGlzLnkgKz0gdGhpcy52ZWxZXG4gICAgfVxuICAgIGNvbGxpc2lvbkRldGVjdCgpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiYWxscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKCAhKHRoaXMgPT09IGJhbGxzW2pdKSAmJiBiYWxsc1tqXS5leGlzdHMgKSB7XG4gICAgICAgICAgICAgICAgbGV0IGR4ID0gdGhpcy54IC0gYmFsbHNbal0ueFxuICAgICAgICAgICAgICAgIGxldCBkeSA9IHRoaXMueSAtIGJhbGxzW2pdLnlcbiAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSlcblxuICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHRoaXMuc2l6ZSArIGJhbGxzW2pdLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ZWxYID0gLXRoaXMudmVsWFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlbFkgPSAtdGhpcy52ZWxZXG4gICAgICAgICAgICAgICAgICAgIGJhbGxzW2pdLnZlbFggPSAtYmFsbHNbal0udmVsWFxuICAgICAgICAgICAgICAgICAgICBiYWxsc1tqXS52ZWxZID0gLWJhbGxzW2pdLnZlbFlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIEJhbGwuY291bnQgPSAwXG4vLyBCYWxsLm1pc3MgPSAwXG5cbkJhbGwuY291bnRCYWxscyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBjb3VudCA9IGJhbGxzLnJlZHVjZSgoYWNjLCBiYWxsKSA9PiB7XG4gICAgICAgIGlmIChiYWxsLmV4aXN0cykgcmV0dXJuIGFjYyArPSAxXG4gICAgICAgIGVsc2UgcmV0dXJuIGFjYyArPSAwXG4gICAgfSwgMClcbiAgICByZXR1cm4gY291bnRcbn1cblxuQmFsbC5tb3VzZUNvbGxpc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBtaXNzID0gdHJ1ZVxuICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBkaXN0WCA9IGJhbGxzW2ldLnggLSBtb3VzZVhcbiAgICAgICAgbGV0IGRpc3RZID0gYmFsbHNbaV0ueSAtIG1vdXNlWVxuICAgICAgICBsZXQgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZGlzdFgqZGlzdFggKyBkaXN0WSpkaXN0WSlcblxuICAgICAgICBpZiAoZGlzdGFuY2UgPCBiYWxsc1tpXS5zaXplKSB7XG4gICAgICAgICAgICBtb3VzZVggPSB1bmRlZmluZWRcbiAgICAgICAgICAgIG1vdXNlWSA9IHVuZGVmaW5lZFxuICAgICAgICAgICAgYmFsbHNbaV0uZXhpc3RzID0gZmFsc2VcbiAgICAgICAgICAgIG1pc3MgPSBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1pc3MpICsrQmFsbC5taXNzXG59IiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJylcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG5sZXQgZ2FtZSA9IHRydWVcblxubGV0IHdpZHRoLCBoZWlnaHQsIG1vdXNlWCwgbW91c2VZXG5cbmZ1bmN0aW9uIHJhbmRvbShtaW4sbWF4KSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXgtbWluKSArIG1pbilcbn1cblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB3aWR0aCA9IGNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoXG4gICAgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodFxufVxuXG5pbml0KClcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluaXQpXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XG4gICAgbW91c2VYID0gZS5jbGllbnRYXG4gICAgbW91c2VZID0gZS5jbGllbnRZXG4gICAgQmFsbC5tb3VzZUNvbGxpc2lvbigpXG4gICAgc2hvd0luZm8oKVxufSlcblxubGV0IGJhbGxzID0gW11cblxuZnVuY3Rpb24gZnVsbEJhbGxzKCkge1xuICAgIHdoaWxlIChiYWxscy5sZW5ndGggPCBCYWxsLmNvdW50KSB7XG4gICAgICAgIGxldCBiYWxsID0gbmV3IEJhbGwoXG4gICAgICAgICAgICByYW5kb20oMCwgd2lkdGgpLFxuICAgICAgICAgICAgcmFuZG9tKDAsIGhlaWdodCksXG4gICAgICAgICAgICByYW5kb20oLTcsNyksXG4gICAgICAgICAgICByYW5kb20oLTcsNyksXG4gICAgICAgICAgICAncmdiKCcgKyByYW5kb20oMCwyNTUpICsgJywnICsgcmFuZG9tKDAsMjU1KSArICcsJyArIHJhbmRvbSgwLDI1NSkgKyAnKScsIFxuICAgICAgICAgICAgcmFuZG9tKDIwLDMwKSxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoIWJhbGwuY29sbGlzaW9uRGV0ZWN0KCkpIGJhbGxzLnB1c2goYmFsbClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvb3AoKSB7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDAuMjUpJ1xuICAgIGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsIGhlaWdodClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChiYWxsc1tpXS5leGlzdHMpIHtcbiAgICAgICAgICAgIGJhbGxzW2ldLmRyYXcoKVxuICAgICAgICAgICAgYmFsbHNbaV0udXBkYXRlKClcbiAgICAgICAgICAgIGJhbGxzW2ldLmNvbGxpc2lvbkRldGVjdCgpXG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKEJhbGwuY291bnRCYWxscygpID09PSAwKSB7XG4gICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGxvb3ApXG4gICAgICAgIHNob3dFbmQoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsb29wKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2hvd0luZm8oKSB7XG4gICAgY29uc3QgaW5mb0NvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50JylcbiAgICBjb25zdCBpbmZvTWlzcyAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWlzcycpXG5cbiAgICBpbmZvQ291bnQudGV4dENvbnRlbnQgPSBCYWxsLmNvdW50QmFsbHMoKVxuICAgIGluZm9NaXNzLnRleHRDb250ZW50ID0gQmFsbC5taXNzXG59XG5cbmZ1bmN0aW9uIHNob3dFbmQoKSB7XG4gICAgY29uc3QgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VuZCcpXG4gICAgY29uc3QgaW5mb01pc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY291bnRNaXNzJylcblxuICAgIGVuZC5jbGFzc0xpc3QucmVtb3ZlKCduby1kaXNwbGF5JylcbiAgICBjYW52YXMuY2xhc3NMaXN0LmFkZCgnbm8tZGlzcGxheScpXG4gICAgaW5mb01pc3MudGV4dENvbnRlbnQgPSBCYWxsLm1pc3Ncbn0iLCJjb25zdCBidG5TdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5TdGFydCcpXG5jb25zdCBidG5SZXN0YXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blJlc3RhcnQnKVxuXG5mdW5jdGlvbiBzdGFydEdhbWUoKSB7XG4gICAgQmFsbC5jb3VudCA9IDFcbiAgICBCYWxsLm1pc3MgPSAwXG4gICAgYmFsbHMgPSBbXVxuICAgIGNhbnZhcy5jbGFzc0xpc3QucmVtb3ZlKCduby1kaXNwbGF5JylcbiAgICBmdWxsQmFsbHMoKVxuICAgIGxvb3AoKVxuICAgIHNob3dJbmZvKClcbn1cblxuYnRuU3RhcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZSA9PiB7XG4gICAgY29uc3Qgc3RhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKVxuICAgIHN0YXJ0LmNsYXNzTGlzdC5hZGQoJ25vLWRpc3BsYXknKVxuICAgIHN0YXJ0R2FtZSgpXG59KVxuXG5idG5SZXN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xuICAgIGNvbnN0IGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbmQnKVxuICAgIGVuZC5jbGFzc0xpc3QuYWRkKCduby1kaXNwbGF5JylcbiAgICBzdGFydEdhbWUoKVxufSkiXX0=
